Компания SkillFactory получила заказ от Федерации Спортивного Туризма России (ФСТР).

ФСТР — организация, занимающаяся развитием и популяризацией спортивного туризма в России и руководящая проведением всероссийских соревнований в этом виде спорта. На сайте https://pereval.online/ ФСТР ведёт базу горных перевалов, которая пополняется туристами. После преодоления очередного перевала, турист заполняет отчёт в формате PDF и отправляет его на электронную почту федерации. Экспертная группа ФСТР получает эту информацию, верифицирует, а затем вносит её в базу, которая ведётся в Google-таблице.

Как заказчик хочет решить эту проблему:

ФСТР заказала студентам SkillFactory разработать мобильное приложение для Android и IOS, которое упростило бы туристам задачу по отправке данных о перевале и сократило время обработки запроса до трёх дней.
Пользоваться мобильным приложением будут туристы. В горах они будут вносить данные о перевале в приложение и отправлять их в ФСТР, как только появится доступ в Интернет. Модератор из федерации будет верифицировать и вносить в базу данных информацию, полученную от пользователей, а те в свою очередь смогут увидеть в мобильном приложении статус модерации и просматривать базу с объектами, внесёнными другими.

В первом спринте стояла задача создать базу данных, написать класс по работе с БД и реализовать всего один метод для Rest API — метод POST submitData.

Метод POST submitData

Когда турист поднимется на перевал, он сфотографирует его и внесёт нужную информацию с помощью мобильного приложения:

-координаты объекта и его высоту;

-название объекта;

-несколько фотографий;

-информацию о пользователе, который передал данные о перевале:

   -имя пользователя (ФИО строкой);
   
   -почта;
   
   -телефон.
   
После этого турист нажмёт кнопку «Отправить» в мобильном приложении. Мобильное приложение вызовет метод submitData твоего REST API.
В ходе реализации метода мы создали нужные таблицы с полями: Turist, Coords, Level, Mounts, Images.

Качественно оформили код, использовали сериализаторы: TuristSerializer, CoordsSerializer, LevelSerializer, ImagesSerializer, MountsSerializer.

Мы создаели базу данных PostgreSQL, класс по работе с БД и один метод POST submitData для REST API.


Во втором спринте стояли задачи:

-редактировать отправленные на сервер данные об объекте, если они в статусе new.

-редактировать можно все поля, кроме тех, что содержат в себе ФИО, адрес почты и номер телефона. Если поле status имеет значение, отличное от new, редактировать данные об объекте нельзя.

-просматривать статус модерации для объекта.

-просматривать все объекты, когда-либо отправленные на сервер самим пользователем, а также их статусы.

В ходе проделанной работы мы дополноли наше REST API:

Мы добавили возможность просматривать запись о перевале с помощью его id: GET /submitData/<id>

Так же мы добавили возможность редактирования данных о перевале, кроме тех полей, что содержат в себе ФИО, адрес почты и номер телефона:PATCH /submitData/<id> — отредактировать существующую запись (замена), если она в статусе new.

В качестве результата у нас выводятся два значения:

state:

1 — если успешно удалось отредактировать запись в базе данных.

0 — в противном случае.

message — если обновить запись не удалось, напиши почему.

Так же мы добавили возможность просматривать все объекты, которые , которые пользователь с почтой <email> отправил на сервер:GET /submitData/?user__email=<email>

Фильтрация по адресу электронной почты? и так же дополнительно по id реализуется с помощью пакета django-filter.

В проекте существует ограничения на изменение данных:

-невозможно изменить личные данные пользователя (фамилия, имя, телефон и т.д.).

-пользователь может менять данные о перевале только при статусе модерации данной информации NEW.


Документация сгенерирована с помощью пакета drf-yasg

Документация swagger: http://127.0.0.1:8000/swagger/

Документация redoc: http://127.0.0.1:8000/redoc/
